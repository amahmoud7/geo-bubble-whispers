import{j as e}from"./ui-DPaiNdCo.js";import{r as b,u as P}from"./vendor-Erj86lFQ.js";import{B as I}from"./BottomNavigation-D2RT3nlO.js";import{C as E,d as M}from"./card-dL58-B1z.js";import{A as T}from"./avatar-mWBahg0l.js";import{B as N}from"./badge-Cp48qLeW.js";import{B as $}from"./index--9NxnRVI.js";import{G as _,Y as w,t as S,_ as k,b as D,v as C,aw as B,a0 as z,A,i as O,a5 as U,S as F}from"./icons-KaFMl-Yu.js";import{f as R}from"./dialog-DeOXp7R6.js";import{f as G}from"./format-vo_1rm9l.js";import{u as X,M as Y}from"./useMessages-DL79cIHx.js";import{u as V,E as q}from"./EventDetailModal-L-MauCi8.js";import{I as H}from"./input-B56E1p0u.js";import"./supabase-ptc-ZlA7.js";import"./query-BhlUNxwW.js";import"./maps-CAbQPzAx.js";import"./en-US-BL2atPzf.js";import"./scroll-area-D1-s-naE.js";import"./index-BdQq_4o_.js";import"./textarea-22JmvlCb.js";const J=({messages:i,events:n,onMessageClick:j,onEventClick:m,selectedMessage:h})=>{const[t,x]=b.useState("public"),p=i.filter(s=>s.isPublic),o=i.filter(s=>!s.isPublic),u=i.sort((s,g)=>{const l=new Date(s.timestamp).getTime()/1e9;return new Date(g.timestamp).getTime()/1e9-l}).slice(0,Math.min(i.length,10)),c=(s,g,l,y)=>e.jsxs($,{variant:t===s?"default":"ghost",onClick:()=>x(s),className:`flex-1 flex flex-col items-center justify-center space-y-1 h-14 rounded-lg font-medium text-xs transition-all duration-200 ${t===s?"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg hover:from-emerald-600 hover:to-green-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[y,e.jsx(N,{variant:"secondary",className:`text-[9px] px-1 py-0.5 ${t===s?"bg-white/20 text-white border-0":"bg-gray-200 text-gray-600"}`,children:l})]}),e.jsx("span",{className:"text-[10px] font-medium",children:g})]}),d=s=>e.jsx(E,{onClick:()=>j(s.id),className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 border-0 shadow-sm bg-white/80 backdrop-blur-sm ${h===s.id?"ring-2 ring-blue-400 shadow-blue-100 bg-blue-50/80":"hover:shadow-gray-200"}`,children:e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"h-10 w-10 border-2 border-white shadow-md ring-1 ring-gray-100",children:e.jsx("img",{src:s.user.avatar,alt:s.user.name,className:"object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-800 truncate text-sm",children:s.user.name}),e.jsx(N,{variant:s.isPublic?"default":"secondary",className:`ml-2 rounded-full px-2 py-0.5 text-xs ${s.isPublic?"bg-green-100 text-green-700 border-green-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:s.isPublic?"ðŸŒ":"ðŸ‘¥"})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:s.content}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate max-w-[100px]",children:s.location})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:R(new Date(s.timestamp),{addSuffix:!0})})]})]})]})]}),s.mediaUrl&&e.jsx("div",{className:"mt-3 w-full h-24 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.mediaUrl,alt:"Message media",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})})]})},s.id),a=s=>e.jsx(E,{onClick:()=>m(s),className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 border-0 shadow-sm bg-white/80 backdrop-blur-sm hover:shadow-gray-200",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm line-clamp-1",children:s.event_title}),e.jsx(N,{className:"ml-2 bg-purple-100 text-purple-700 border-purple-200 rounded-full px-2 py-0.5 text-xs",children:"ðŸŽ« Event"})]}),s.event_venue&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2 line-clamp-1",children:["ðŸ“ ",s.event_venue]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:G(new Date(s.event_start_date),"MMM d, h:mm a")})]}),(s.event_price_min||s.event_price_max)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:s.event_price_min&&s.event_price_max?`$${s.event_price_min} - $${s.event_price_max}`:s.event_price_min?`From $${s.event_price_min}`:`Up to $${s.event_price_max}`})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"capitalize text-gray-400",children:s.event_source}),s.event_url&&e.jsx(z,{className:"h-3 w-3 ml-1"})]})]})]})]})})},s.id),r=s=>{const l={public:{icon:e.jsx(_,{className:"w-8 h-8 text-gray-400"}),title:"No public Los yet",description:"Public Los from all users will appear here"},foryou:{icon:e.jsx(w,{className:"w-8 h-8 text-gray-400"}),title:"No recommendations yet",description:"Personalized Los based on your activity will appear here"},following:{icon:e.jsx(S,{className:"w-8 h-8 text-gray-400"}),title:"No following Los yet",description:"Los from people you follow will appear here"},events:{icon:e.jsx(w,{className:"w-8 h-8 text-gray-400"}),title:"No events found",description:"Events in your current map area will appear here"}}[s];return e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-lo-teal/10 to-blue-500/10 rounded-3xl flex items-center justify-center",children:l.icon}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:l.title}),e.jsx("p",{className:"text-gray-500 text-base max-w-sm mx-auto leading-relaxed",children:l.description}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-lo-teal to-blue-500 rounded-full mx-auto"})})]})},v=()=>{switch(t){case"public":return{items:p,renderItem:d};case"foryou":return{items:u,renderItem:d};case"following":return{items:o,renderItem:d};case"events":return{items:n,renderItem:a};default:return{items:[],renderItem:d}}},{items:f,renderItem:L}=v();return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl border-b border-gray-200/30 px-3 py-3 sticky top-0 z-10 shadow-sm",children:[e.jsxs("div",{className:"flex space-x-1 mb-3",children:[c("public","Public",p.length,e.jsx(_,{className:"w-3 h-3"})),c("foryou","For you",u.length,e.jsx(w,{className:"w-3 h-3"})),c("following","Following",o.length,e.jsx(S,{className:"w-3 h-3"})),c("events","Events",n.length,e.jsx(k,{className:"w-3 h-3"}))]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:[f.length," ",f.length===1?"item":"items",t==="events"&&" happening now",t==="public"&&" near you",t==="foryou"&&" recommended",t==="following"&&" from friends"]})})]}),e.jsx("div",{className:"flex-1 px-4 py-4 overflow-y-auto modern-scrollbar",children:e.jsx("div",{className:"space-y-4 pb-8",children:f.length===0?r(t):f.map(s=>L(s))})})]})},fe=()=>{const i=P(),{filteredMessages:n}=X(),{events:j}=V(),[m,h]=b.useState(null),[t,x]=b.useState(null),[p,o]=b.useState(!1),u=a=>{const r=n.find(v=>v.id===a);r?.isEvent?(console.log("ðŸŽ« EXPLORE: Opening event modal for:",r),x(r),o(!0)):(console.log("ðŸ’¬ EXPLORE: Opening message detail for:",r),h(a))},c=a=>{x(a),o(!0)},d=()=>{o(!1),x(null)};return e.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gradient-to-br from-gray-50 to-white overflow-hidden",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 z-50",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>i("/"),className:"h-8 w-8 rounded-full hover:bg-gray-100 transition-all duration-200",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-lo-navy to-lo-teal bg-clip-text text-transparent",children:"Explore"}),e.jsx(O,{className:"h-4 w-4 text-lo-teal"})]}),e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-red-500/10 rounded-full",children:[e.jsx(U,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-red-500",children:"Live"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{placeholder:"Search events, places, people...",className:"h-9 pl-9 pr-4 bg-gray-100/80 border-0 rounded-xl text-sm placeholder:text-gray-500 focus:bg-white focus:ring-2 focus:ring-lo-teal/20 transition-all duration-200"}),e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(J,{messages:n,events:j,onMessageClick:u,onEventClick:c,selectedMessage:m})}),m&&(()=>{const a=n.find(r=>r.id===m);return a&&!a.isEvent?e.jsx(Y,{message:a,onClose:()=>h(null)}):null})(),e.jsx(q,{event:t,isOpen:p,onClose:d}),e.jsx(I,{})]})};export{fe as default};
